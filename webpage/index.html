<html>
  
  <head>
    <title>Sounds Of Code - Press play to start</title>
	<style>
	#body{
		padding:0;
		margin:0;
		
		background:#ecf0f1;
		color:#2c3e69;
	}
	.lengthSelector{
		position:relative;
		width:100%;
		background:url(./sound_bg.png) center center no-repeat;
		background-size: 100% 90px;
		height:170px;
		cursor:pointer;
	}
	.graphVisu{
		background:#FFFEFE;
	}
	.playingBar{
		position:absolute;
		top:0;
		background:#F66;
		width:3px;
		height:100%;
		z-index:1;
	}
	.visuBar{
		background:#2c3e69;
	}
	
	.comments{
		position:relative;
		height:50px;
		background:#dce4ec;
	}
	
	.comment{
		height:40px;
		width:20px;
		position:absolute;
		top:5px;
		overflow: visible;
	}
	
	.pointer, .comContent{
		display:inline-block;
		vertical-align:top;
		
	}
	
	.pointer{
		width:20px;
		height:40px;
		background: url(Pointer.png) no-repeat center center;
	}
	
	.comContent{
		position:relative;
		top:0;
		float:left;
		left:25px;
		margin-top:-100px;
		display:none;
		width:275px;
		background:#95a5a6;
		color:#FFF;
		height:100px;
		z-index:10;
		padding:5px;
	}
	
	.hangLeft{
		left:auto;
		float:right;
		right:25px;
	}
	
	
	
	.headerContent{
		width:100%;
	}
	
	.header{
		height:220px;
		overflow:hidden;
		background: #355c84;
		background-size:auto 200px;
		width:100%;
		
			/* For Safari 3.1 to 6.0 */
			-webkit-transition-property: height;
			-webkit-transition-duration: 0.2s;
			-webkit-transition-timing-function: linear;
			/* Standard syntax */
			transition-property: height;
			transition-duration: 0.2s;
			transition-timing-function: linear;
	}
	
	.head{
		position:fixed;
		width:100%;
	}
	
	.body, .footer{
		width:70%;
		margin:0 auto;
	}
	
	.body{
		background:#FEFEFF;
		padding:30px;
		padding-top:230px;
		
		text-align:justify;
	}
	
	.footer{
		margin-bottom:20px;
		text-align:center;
	}
	
	.title{
		position: fixed;
		z-index:10;
		background: url(bg.png)repeat-x top left;
		width:100%;
		height:150px;
		color:#FFF;
		font-weight:100;
		pointer-events:none;
		
		text-align:center;
	}
	
	h1{	
		margin:0;
	}
	
	.buttonBar{
		background: url(shade.png)repeat-x top left;
		width:100%;
		height:40px;
	}
	
	.btnWrap{
		/*margin-right:12%;*/
		float:right;
		text-align:left;
		width:auto;
	}
	
	.button{
		width:85px;
		height:35px;
		display:inline-block;
		margin-left:-9px;
		margin-top:1px;
		cursor:pointer;
	}
	
	.btnP{
		background:url(btnP.png) top center no-repeat;
	}
	.btnP:hover{
		background:url(btnPH.png) top center no-repeat;
	}
	
	.btnB{
		background:url(btnB.png) top center no-repeat;
	}
	.btnB:hover{
		background:url(btnBH.png) top center no-repeat;
	}
	
	.btnG{
		background:url(btnG.png) top center no-repeat;
	}
	.btnG:hover{
		background:url(btnGH.png) top center no-repeat;
	}
	
	.beautyButtonWrap{
		vertical-align:top;
	}
	

	
	</style>
    <script type="text/javascript">
        // Global variable to track current file name.
        var currentFile = "demo.mp3";
		var inited = false;	// I hereby declare inited as being a real word of the english language. Shakespeare style
		var graphOpen = false;
		
		var comContents;
		//visibility:visible;
		var callTimeOutOnToolTip = function(element){
			setTimeout(function(){
				element.style.display="none";
			},4000);
		};
		
		setTimeout(function(){
			var comments = window.document.getElementsByClassName('pointer');
			comContents = window.document.getElementsByClassName('comContent');
			for(var i = 0; i< comments.length;i++){
				comments[i].i = i;
				comments[i].onmouseover = function(e) {
					comContents[this.i].style.display="inline-block";
					callTimeOutOnToolTip(comContents[this.i]);
				};
			}
		}, 0);
		
		setTimeout(function(){
			var oAudio = document.getElementById('audioTag');
			oAudio.src = currentFile;
			oAudio.addEventListener("timeupdate", progressChecking, true);
			inited=true;
		},0);
		
        function toggleAudio(event) {
			event.stopPropagation();
            // Check for audio element support.
            if (window.HTMLAudioElement) {
                try {
                    var oAudio = document.getElementById('audioTag');
                    var btn = document.getElementById('play'); 

                    if (oAudio.paused) {
                        oAudio.play();
                    }
                    else {
                        oAudio.pause();
                    }
					
					oAudio.addEventListener("timeupdate", progressChecking, true);
                }
                catch (e) {
                     if(window.console && console.error("Error:" + e));
                }
            }
        }
		
		function gotoAudio(event){
			var offset = 0;
			var totalWidth = window.document.getElementById("songVisualizer").clientWidth;
			var percent = (event.x - offset)/totalWidth;
			console.log(percent);
			if (window.HTMLAudioElement) {
                try {
                    var oAudio = document.getElementById('audioTag');
                    oAudio.currentTime = percent*oAudio.duration;
					oAudio.play();
                }
                catch (e) {
                    // Fail silently but show in F12 developer tools console
                     if(window.console && console.error("Error:" + e));
               }
            }
		}
		
		function progressChecking(){
			var oAudio = document.getElementById('audioTag');
			var totalWidth = window.document.getElementById("songVisualizer").clientWidth;
			console.log(totalWidth);
			var percent = oAudio.currentTime/oAudio.duration;
			
			var playingBars = document.getElementsByClassName('playingBar');
			for(var i=0;i<playingBars.length;i++){
			playingBars[i].setAttribute('style','left:'+percent*totalWidth+'px;');
			}
		}
		
		function toggleGraphs(){
			var headerHeight = 220;
			if(!graphOpen){
				headerHeight = 370;
			}
			graphOpen = !graphOpen;
			document.getElementsByClassName('header')[0].setAttribute('style','height:'+headerHeight+'px');
			
		}
		
		
    </script>
  </head>
  
  <body id="body">
	<div class="head">
	<div class="title"><h1>Sounds Of Code</h1></div>
	<div class="header">
			<audio id="audioTag">
			  Get a decent browser
			</audio>
		<div class="headerContent">
			<div id="songVisualizer" class="lengthSelector" onclick="gotoAudio(event)">
			<div class="playingBar"></div>
			
			</div>
			<div class="comments">
			
			<div class="comment" style="left:80%">
				<div class="pointer"></div>
				<div class="comContent hangLeft"> A longer comment that will probably overflow because it is soooo Lorem Ipsum ooh yeah baby</div>
			</div>
			<div class="comment" style="left:0%">
				<div class="pointer"></div>
				<div class="comContent"> A longer comment that will probably overflow because it is soooo Lorem Ipsum ooh yeah baby</div>
			</div>
			
			
			</div>
			<div id="graphsVisualizer" class="lengthSelector graphVisu" onclick="gotoAudio(event)">
				<div class="playingBar visuBar"></div>
			</div>
		</div>
	</div>
	<div class="buttonBar">
		<div class="btnWrap">
			<span class="button btnP" id="play" onclick="toggleAudio(event);">
			</span>
			<span class="button btnB" id="beautif" onclick="">
			</span>
			<span class="button btnG" id="getGraphz" onclick="toggleGraphs();">
			</span>
			
			
		</div>
	</div>
	</div>
	<div class="body">
	<h2>Sounds of Code - <span style="color:#e74c3c	">Press play to start</span></h2>
	<p>
	A musical representation of GitHub's activity timeline.<br />
	... Or at least an attempt to make it musical.
	</p>
	<h3>What's that ?</h3>
	<p>This is the sound of people committing, pushing, starring, forking, and more if you listen closely. This music was directly generated from 
	data harvested from the GitHub Archive timeline. Each sound corresponds to a specific event occurring on the GitHub platform for the last two years. 
	Those elements represent the overall GitHub activity, repositories being created, file uploads, and forks.<br />
	This project represents as sound, in a chronological order, GitHub. A musical log journal.</p>
	<h3>It sounds awful</h3>
	<p>Indeed. Randomly occurring events with random chaotic frequencies (that are proportional to the actual frequencies of events) never made good 
	music. But I tried to make it a little better with a "beautified" version, that at least fixes the problem of the mismatching frequencies. You 
	can play it right now on this very page by clicking on this button : <span style="margin-left:0; height:30px; margin-bottom:-10px;" class="button btnB" id="beautif" onclick=""></span></p>
	<p class="beautyButtonWrap"></p>
	<p>And yes, it's still not pleasant to hear.</p>
	<h3>Is there more about this ?</h3>
	<p>I'm glad you ask ;p. There are plenty of things to do/know/hear about this. This project was done as an entry for the Annual GitHub Data Challenge 
	(2014&nbsp;edition). It thus comes with a nice <a href="#">repository</a> on GitHub where you can see how the data was harvested, processed, organized, and even contribute. 
	You can get lots of information on the <a href="#">project's wiki</a>, like long and boring texts explaining what exactly the elements in the music 
	represent, instructions to do your very own version and cool links to cool stuff.<br />
	There's a lot of things to do if this project interrests you. If it doesn't, well you can still check out what the other participants to the 
	challenge did :)</p>
	</div>
	<div class="footer">A project by <a href="#">LeonardA-L</a></div>
  </body>

</html>